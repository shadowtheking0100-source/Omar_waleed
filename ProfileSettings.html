<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Edit Profile - Legend Studios</title>
<style>
  :root{
    --bg1:#6dd5ed;
    --bg2:#2193b0;
    --panel:#ffffffee;
    --accent:#2193b0;
    --accent-hover:#1b7a95;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    height:100vh;
    font-family:Inter,system-ui,Segoe UI,Roboto,Arial;
    background:radial-gradient(circle at var(--x,50%) var(--y,50%),var(--bg1),var(--bg2));
    color:#222;
    transition:background .12s linear;
    display:flex;
    flex-direction:column;
  }
  header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    color:#fff;
    font-weight:700;
    padding:20px 40px;
    position:absolute;
    width:100%;
    top:0;
    left:0;
    z-index:10;
  }
  header a{
    color:#fff;
    text-decoration:none;
    font-weight:600;
    background:rgba(255,255,255,0.15);
    padding:8px 14px;
    border-radius:10px;
    transition:background .2s ease;
  }
  header a:hover{background:rgba(255,255,255,0.3)}
  main{
    background:var(--panel);
    border-radius:18px;
    padding:40px;
    width:90%;
    max-width:500px;
    margin:auto;
    margin-top:130px;
    box-shadow:0 10px 28px rgba(0,0,0,0.15);
    text-align:center;
    animation:fadeIn .6s ease forwards;
  }
  @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
  .avatar-preview{
    width:100px;
    height:100px;
    border-radius:50%;
    object-fit:cover;
    margin-bottom:15px;
    border:3px solid var(--accent);
    background:#cbd5e1;
  }
  input, textarea{
    width:90%;
    padding:12px 14px;
    margin:10px 0;
    border-radius:12px;
    border:1px solid #cbd5e1;
    font-size:1rem;
    background:#f8fafc;
    transition:border .2s ease, box-shadow .2s ease;
  }
  input:focus, textarea:focus{
    outline:none;
    border-color:var(--accent);
    box-shadow:0 0 8px rgba(33,147,176,0.3);
  }
  textarea{resize:none;height:80px;}
  button{
    margin-top:20px;
    background:var(--accent);
    color:#fff;
    padding:12px 28px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    font-weight:600;
    font-size:0.95rem;
    box-shadow:0 6px 20px rgba(33,147,176,0.3);
    transition:transform .2s ease, background .3s ease;
  }
  button:hover{background:var(--accent-hover);transform:scale(1.05);}
</style>
</head>
<body>
<header>
  <div>Legend Studios</div>
  <a href="Profile.html">â¬… Back</a>
</header>

<main>
  <h2>Edit Your Profile</h2>
  <img src="" class="avatar-preview" id="avatarPreview">
  <input type="file" id="avatarInput" accept="image/*"><br>
  <input type="text" id="name" placeholder="Display Name"><br>
  <input type="email" id="email" placeholder="Email"><br>
  <textarea id="bio" placeholder="Bio"></textarea><br>
  <button id="save">ðŸ’¾ Save Changes</button>
</main>

<script>
// ðŸŒˆ Animated background effect (same as Profile page)
document.body.addEventListener('mousemove', e => {
  const x = (e.clientX / window.innerWidth) * 100;
  const y = (e.clientY / window.innerHeight) * 100;
  document.body.style.setProperty('--x', `${x}%`);
  document.body.style.setProperty('--y', `${y}%`);
});

// ðŸ§ Default grey avatar image
const defaultAvatar = "https://i.imgur.com/qkdpN.jpg"; // grey silhouette avatar

// ðŸ§¾ Load existing user data from localStorage
const userRaw = localStorage.getItem('legendUser');
const user = userRaw ? JSON.parse(userRaw) : {
  name: "Shadow",
  email: "Shadowtheking0100@gmail.com",
  bio: "I am a web developer",
  avatar: "",
  games: Math.floor(Math.random() * 10) + 5,
  friends: Math.floor(Math.random() * 50) + 10,
  joins: Math.floor(Math.random() * 30) + 5
};

// ðŸ–¼ï¸ Set current data to the input fields
const avatarPreview = document.getElementById('avatarPreview');
avatarPreview.src = user.avatar || defaultAvatar;

document.getElementById('name').value = user.name;
document.getElementById('email').value = user.email;
document.getElementById('bio').value = user.bio;

// ðŸ“· Image upload feature (any local image allowed)
document.getElementById('avatarInput').addEventListener('change', e => {
  const file = e.target.files[0];
  if (file) {
    // Only allow valid image files
    if (!file.type.startsWith("image/")) {
      alert("Please upload a valid image file (PNG, JPG, etc).");
      e.target.value = "";
      return;
    }

    const reader = new FileReader();
    reader.onload = function() {
      avatarPreview.src = reader.result;
      user.avatar = reader.result; // Store the uploaded image temporarily
    };
    reader.readAsDataURL(file);
  }
});

// ðŸ’¾ Save button click handler
document.getElementById('save').onclick = () => {
  const newName = document.getElementById('name').value.trim();
  const newEmail = document.getElementById('email').value.trim();
  const newBio = document.getElementById('bio').value.trim();

  // Validate input fields
  if (!newName || !newEmail) {
    alert("Name and Email cannot be empty!");
    return;
  }

  // Create updated user object
  const newUser = {
    name: newName,
    email: newEmail,
    bio: newBio,
    avatar: user.avatar || defaultAvatar,
    games: user.games || Math.floor(Math.random() * 10) + 5,
    friends: user.friends || Math.floor(Math.random() * 50) + 10,
    joins: user.joins || Math.floor(Math.random() * 30) + 5
  };

  // Save updated data
  localStorage.setItem('legendUser', JSON.stringify(newUser));
  alert("âœ… Profile updated successfully!");
  window.location.href = "Profile.html";
};

// ðŸ”™ Back button functionality
const backButton = document.getElementById('backButton');
if (backButton) {
  backButton.addEventListener('click', () => {
    window.location.href = "Profile.html";
  });
}

</script>
</body>
</html>
